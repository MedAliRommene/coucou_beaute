{% extends 'base.html' %}
{% load static %}

{% block title %}Client - Coucou Beauté{% endblock %}

{% block content %}
<div class="p-6 space-y-6">
    <div class="flex items-center justify-between">
        <h1 class="text-2xl font-bold">Professionnels à proximité</h1>
        <a href="/logout/" class="text-sm px-3 py-2 rounded-lg bg-gray-200">Déconnexion</a>
    </div>
    <div id="pros" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', async function () {
        const wrap = document.getElementById('pros');
        try {
            const r = await fetch('/api/professionals/search/?page=1&page_size=12');
            if (!r.ok) return;
            const j = await r.json();
            (j.results || []).forEach(p => {
                const div = document.createElement('div');
                div.className = 'bg-white rounded-xl border p-4';
                div.innerHTML = `
          <div class="font-medium">${p.business_name}</div>
          <div class="text-sm text-gray-600">${(p.extra?.city || '—')} · ⭐ ${(p.extra?.rating || 4.8)}</div>
          <a href="#" class="mt-3 inline-block text-pink-600 text-sm">Voir le profil</a>
        `;
                wrap.appendChild(div);
            });
        } catch (e) { }
    });
</script>
{% endblock %}