{% extends 'base.html' %}
{% load static %}
{% block template_id %}front_web/landing.html{% endblock %}

{% block title %}Coucou Beauté - Accueil{% endblock %}

{% block extra_css %}
<!-- Google Fonts - Typography Artistique -->
<link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&family=Dancing+Script:wght@400;500;600;700&display=swap"
    rel="stylesheet">

<!-- Facebook SDK pour les embeds -->
<div id="fb-root"></div>

<style>
    :root {
        /* Palette de couleurs artistique et raffinée */
        --rose-poudre: #F8BBD0;
        --rose-vintage: #E8A4B8;
        --rose-doux: #FCE4EC;
        --bleu-sage: #A8D5E2;
        --bleu-clair: #B3E5FC;
        --bleu-doux: #E1F5FE;
        --beige-clair: #F5EFE7;
        --dore-vintage: #D4AF37;
        --dore-pale: #FBE9E7;
        --dore-accent: #FFD54F;
        --blanc-creme: #FFF8F0;
        --gris-tres-clair: #FAFAFA;
        --gris-clair: #F5F5F5;
        --gris-moyen: #E0E0E0;
        --gris-fonce: #424242;
        --noir-doux: #2C2C2C;

        /* Dégradés artistiques */
        --gradient-rose: linear-gradient(135deg, #F8BBD0 0%, #E8A4B8 50%, #FCE4EC 100%);
        --gradient-bleu: linear-gradient(135deg, #A8D5E2 0%, #B3E5FC 50%, #E1F5FE 100%);
        --gradient-dore: linear-gradient(135deg, #D4AF37 0%, #FFD54F 50%, #FBE9E7 100%);
        --gradient-hero: linear-gradient(135deg, #F8BBD0 0%, #A8D5E2 30%, #B3E5FC 60%, #FBE9E7 100%);
        --gradient-glass: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%);
        --gradient-vintage: linear-gradient(45deg, #D4AF37 0%, #F8BBD0 25%, #A8D5E2 50%, #FBE9E7 75%, #D4AF37 100%);

        /* Ombres artistiques */
        --shadow-soft: 0 8px 32px rgba(248, 187, 208, 0.12);
        --shadow-medium: 0 16px 48px rgba(248, 187, 208, 0.18);
        --shadow-strong: 0 24px 64px rgba(248, 187, 208, 0.25);
        --shadow-glass: 0 8px 32px rgba(255, 255, 255, 0.1);
        --shadow-vintage: 0 12px 40px rgba(212, 175, 55, 0.15);
    }

    /* Typography Artistique */
    body {
        font-family: 'Inter', sans-serif;
        line-height: 1.7;
        color: var(--noir-doux);
        background: var(--blanc-creme);
        overflow-x: hidden;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        font-family: 'Playfair Display', serif;
        font-weight: 600;
        line-height: 1.3;
        letter-spacing: -0.02em;
    }

    .artistic-text {
        font-family: 'Dancing Script', cursive;
        font-weight: 600;
    }

    /* Hero Section Artistique */
    .hero-section {
        background: var(--gradient-hero);
        position: relative;
        overflow: hidden;
        min-height: 100vh;
        display: flex;
        align-items: center;
        /* Remplacer l'accent doré par rose vintage pour synchronisation */
        --dore-vintage: var(--rose-vintage);
    }

    /* Texture marbre subtile en surcouche */
    .hero-section::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(60% 60% at 70% 10%, rgba(212, 175, 55, 0.10) 0%, transparent 60%);
        opacity: 0.22;
        mix-blend-mode: normal;
        pointer-events: none;
    }

    .hero-bg-pattern {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image:
            radial-gradient(circle at 15% 85%, rgba(248, 187, 208, 0.4) 0%, transparent 60%),
            radial-gradient(circle at 85% 15%, rgba(168, 213, 226, 0.4) 0%, transparent 60%),
            radial-gradient(circle at 50% 50%, rgba(251, 233, 231, 0.3) 0%, transparent 70%),
            linear-gradient(45deg, transparent 30%, rgba(212, 175, 55, 0.1) 50%, transparent 70%);
    }

    /* Ornements dorés baroques dans le hero */
    .ornament {
        position: absolute;
        width: 180px;
        height: 180px;
        filter: drop-shadow(0 6px 16px rgba(212, 175, 55, 0.25));
        opacity: 0.55;
        pointer-events: none;
        z-index: 2;
        color: var(--rose-vintage);
    }

    .ornament-tl {
        top: clamp(6px, 4vw, 24px);
        left: clamp(6px, 4vw, 24px);
        transform: rotate(-6deg);
    }

    .ornament-br {
        right: clamp(6px, 4vw, 24px);
        bottom: clamp(6px, 4vw, 24px);
        transform: rotate(8deg);
    }

    /* Cadre sculpture avec coins dorés et ambiance marbre/or */
    .sculpture-frame {
        position: relative;
        border-radius: 26px;
        padding: 12px;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.70), rgba(255, 255, 255, 0.45));
        border: 1px solid rgba(212, 175, 55, 0.30);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
        backdrop-filter: blur(10px);
        max-width: 560px;
        width: 100%;
    }

    .sculpture {
        width: 100%;
        aspect-ratio: 4/3;
        object-fit: cover;
        border-radius: 18px;
        filter: none;
        mix-blend-mode: normal;
        background:
            radial-gradient(80% 60% at 70% 20%, rgba(179, 229, 252, 0.18) 0%, transparent 60%),
            radial-gradient(70% 60% at 10% 90%, rgba(248, 187, 208, 0.18) 0%, transparent 60%);
    }

    .gold-corners span {
        position: absolute;
        width: 28px;
        height: 28px;
        border: 2px solid rgba(212, 175, 55, 0.75);
        filter: drop-shadow(0 4px 8px rgba(212, 175, 55, 0.25));
    }

    .gold-corners span:nth-child(1) {
        top: 16px;
        left: 16px;
        border-right: none;
        border-bottom: none;
        border-radius: 8px 0 0 0;
    }

    .gold-corners span:nth-child(2) {
        top: 16px;
        right: 16px;
        border-left: none;
        border-bottom: none;
        border-radius: 0 8px 0 0;
    }

    .gold-corners span:nth-child(3) {
        bottom: 16px;
        left: 16px;
        border-right: none;
        border-top: none;
        border-radius: 0 0 0 8px;
    }

    .gold-corners span:nth-child(4) {
        bottom: 16px;
        right: 16px;
        border-left: none;
        border-top: none;
        border-radius: 0 0 8px 0;
    }

    .chips {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 12px;
    }

    .chip {
        font-family: 'Inter', system-ui, sans-serif;
        font-size: 12.5px;
        letter-spacing: 0.02em;
        color: #6b5a3a;
        background: rgba(212, 175, 55, 0.12);
        border: 1px solid rgba(212, 175, 55, 0.28);
        padding: 8px 12px;
        border-radius: 999px;
        backdrop-filter: blur(6px);
        transition: transform 0.3s ease;
    }

    .chip:hover {
        transform: translateY(-2px);
    }

    /* Footer moderne en verre et dégradés pastel */
    .footer-elegant {
        position: relative;
        overflow: hidden;
    }

    .footer-elegant::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 6px;
        background: linear-gradient(90deg, var(--rose-vintage), rgba(232, 164, 184, .35), var(--rose-vintage));
        opacity: .6;
        pointer-events: none;
    }

    .footer-elegant::after {
        content: "";
        position: absolute;
        inset: -20% -10% auto -10%;
        height: 60%;
        background:
            radial-gradient(40% 40% at 20% 30%, rgba(248, 187, 208, .18) 0%, transparent 70%),
            radial-gradient(40% 40% at 80% 10%, rgba(179, 229, 252, .18) 0%, transparent 70%);
        pointer-events: none;
    }

    .footer-panel {
        background: rgba(255, 255, 255, .45);
        border: 1px solid rgba(255, 255, 255, .5);
        border-radius: 22px;
        backdrop-filter: blur(12px);
        box-shadow: var(--shadow-glass);
    }

    .footer-elegant a.footer-link {
        position: relative;
        transition: color .25s ease;
    }

    .footer-elegant a.footer-link::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: -2px;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, var(--rose-vintage), var(--rose-poudre));
        transition: width .25s ease;
    }

    .footer-elegant a.footer-link:hover::after {
        width: 100%;
    }

    /* Boutons or antique/ghost pour le hero */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 14px 22px;
        border-radius: 14px;
        font-weight: 600;
        transition: all 0.35s ease;
        text-decoration: none;
    }

    .btn-gold {
        color: #fff;
        background: linear-gradient(135deg, #dcbf60 0%, var(--dore-vintage) 35%, #b9922a 100%);
        box-shadow: 0 12px 28px rgba(212, 175, 55, 0.25);
        border: 1px solid rgba(212, 175, 55, 0.45);
    }

    .btn-gold:hover {
        transform: translateY(-3px);
        box-shadow: 0 18px 40px rgba(212, 175, 55, 0.30);
    }

    .btn-ghost {
        color: #555;
        background: rgba(255, 255, 255, 0.55);
        border: 1px solid rgba(0, 0, 0, 0.06);
        backdrop-filter: blur(10px);
    }

    .btn-ghost:hover {
        transform: translateY(-3px);
        background: rgba(255, 255, 255, 0.75);
    }

    /* Service Cards Artistiques */
    .service-card {
        background: var(--blanc-creme);
        border-radius: 24px;
        padding: 2.5rem;
        border: 1px solid rgba(248, 187, 208, 0.2);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
    }

    .service-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--gradient-vintage);
        transform: scaleX(0);
        transition: transform 0.5s ease;
    }

    .service-card:hover::before {
        transform: scaleX(1);
    }

    .service-card:hover {
        transform: translateY(-15px) scale(1.02);
        box-shadow: var(--shadow-strong);
        border-color: var(--rose-poudre);
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 187, 208, 0.05) 100%);
    }

    .service-icon {
        width: 60px;
        height: 60px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 1.5rem;
        position: relative;
        overflow: hidden;
    }

    .service-icon::before {
        content: '';
        position: absolute;
        inset: 0;
        background: var(--gradient-vintage);
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .service-card:hover .service-icon::before {
        opacity: 0.1;
    }

    /* Professional Cards Artistiques */
    .pro-card {
        background: var(--blanc-creme);
        border-radius: 28px;
        overflow: hidden;
        border: 1px solid rgba(248, 187, 208, 0.2);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        box-shadow: var(--shadow-soft);
    }

    .pro-card:hover {
        transform: translateY(-12px) rotateX(3deg);
        box-shadow: var(--shadow-strong);
        border-color: var(--dore-vintage);
    }

    .pro-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(248, 187, 208, 0.95) 0%, rgba(168, 213, 226, 0.95) 100%);
        backdrop-filter: blur(15px);
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        padding: 2rem;
    }

    .pro-card:hover .pro-overlay {
        opacity: 1;
        transform: translateY(0);
    }

    /* Animations Artistiques */
    .fade-in-up {
        opacity: 0;
        transform: translateY(40px);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .fade-in-up.visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* Délais d'animation via data-delay */
    .fade-in-up[data-delay="0"] {
        transition-delay: 0.1s;
    }

    .fade-in-up[data-delay="1"] {
        transition-delay: 0.2s;
    }

    .fade-in-up[data-delay="2"] {
        transition-delay: 0.3s;
    }

    .fade-in-up[data-delay="3"] {
        transition-delay: 0.4s;
    }

    .fade-in-up[data-delay="4"] {
        transition-delay: 0.5s;
    }

    .fade-in-up[data-delay="5"] {
        transition-delay: 0.6s;
    }

    .fade-in-left {
        opacity: 0;
        transform: translateX(-40px);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .fade-in-left.visible {
        opacity: 1;
        transform: translateX(0);
    }

    .fade-in-right {
        opacity: 0;
        transform: translateX(40px);
        transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .fade-in-right.visible {
        opacity: 1;
        transform: translateX(0);
    }

    /* Star Animation Artistique */
    .star-anim {
        animation: twinkle 2.5s ease-in-out infinite;
        color: var(--dore-vintage);
        filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.3));
    }

    @keyframes twinkle {

        0%,
        100% {
            transform: scale(1) rotate(0deg);
            opacity: 0.8;
        }

        25% {
            transform: scale(1.1) rotate(90deg);
            opacity: 1;
        }

        50% {
            transform: scale(1.3) rotate(180deg);
            opacity: 1;
        }

        75% {
            transform: scale(1.1) rotate(270deg);
            opacity: 1;
        }
    }

    /* Testimonials Carousel Artistique */
    .testimonials-carousel {
        perspective: 1200px;
        overflow: hidden;
        border-radius: 28px;
        background: var(--gradient-glass);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .testimonials-track {
        display: flex;
        gap: 2rem;
        transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
    }

    .testimonial-card {
        background: var(--blanc-creme);
        border-radius: 24px;
        padding: 2.5rem;
        min-width: 350px;
        border: 1px solid rgba(248, 187, 208, 0.2);
        box-shadow: var(--shadow-soft);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
        position: relative;
        overflow: hidden;
    }

    .testimonial-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-vintage);
        transform: scaleX(0);
        transition: transform 0.5s ease;
    }

    .testimonial-card:hover::before {
        transform: scaleX(1);
    }

    .testimonial-card:hover {
        transform: rotateY(8deg) translateZ(30px);
        box-shadow: var(--shadow-strong);
    }

    /* Contact Form Artistique */
    .contact-form {
        background: var(--blanc-creme);
        border-radius: 28px;
        padding: 3rem;
        border: 1px solid rgba(248, 187, 208, 0.2);
        box-shadow: var(--shadow-soft);
        backdrop-filter: blur(10px);
    }

    .form-group {
        position: relative;
        margin-bottom: 2rem;
    }

    .form-input {
        width: 100%;
        padding: 1.25rem 1.5rem;
        border: 2px solid rgba(248, 187, 208, 0.3);
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.8);
        font-family: 'Inter', sans-serif;
        font-size: 1rem;
        transition: all 0.4s ease;
        outline: none;
        backdrop-filter: blur(10px);
    }

    .form-input:focus {
        border-color: var(--dore-vintage);
        background: var(--blanc-creme);
        box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.1);
        transform: translateY(-2px);
    }

    .form-label {
        position: absolute;
        top: 1.25rem;
        left: 1.5rem;
        color: var(--gris-fonce);
        font-family: 'Inter', sans-serif;
        font-size: 1rem;
        transition: all 0.4s ease;
        pointer-events: none;
        background: rgba(255, 255, 255, 0.8);
        padding: 0 0.5rem;
    }

    .form-input:focus+.form-label,
    .form-input:not(:placeholder-shown)+.form-label {
        top: -0.5rem;
        left: 1rem;
        font-size: 0.875rem;
        color: var(--dore-vintage);
        background: var(--blanc-creme);
        font-weight: 500;
    }

    /* Buttons Artistiques */
    .btn-primary {
        background: var(--gradient-rose);
        color: var(--blanc-creme);
        padding: 1.25rem 2.5rem;
        border-radius: 16px;
        border: none;
        font-family: 'Inter', sans-serif;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.4s ease;
        box-shadow: var(--shadow-soft);
        position: relative;
        overflow: hidden;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .btn-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
        transition: left 0.6s ease;
    }

    .btn-primary:hover::before {
        left: 100%;
    }

    .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-medium);
    }

    .btn-secondary {
        background: var(--gradient-bleu);
        color: var(--blanc-creme);
        padding: 1.25rem 2.5rem;
        border-radius: 16px;
        border: none;
        font-family: 'Inter', sans-serif;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.4s ease;
        box-shadow: var(--shadow-soft);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .btn-secondary:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-medium);
    }

    /* Glass Cards Artistiques */
    .glass-card {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 24px;
        box-shadow: var(--shadow-glass);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .glass-card:hover {
        transform: translateY(-8px) scale(1.02);
        background: rgba(255, 255, 255, 0.3);
        box-shadow: var(--shadow-strong);
    }

    /* Modal Artistique */
    .modal {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(15px);
        z-index: 60;
    }

    .modal.open {
        display: flex;
    }

    /* Responsive Design */
    @media (max-width: 768px) {

        .service-card,
        .pro-card {
            margin-bottom: 2rem;
        }

        .testimonial-card {
            min-width: 300px;
        }

        .contact-form {
            padding: 2rem;
        }
    }

    /* Hide dark mode toggle on landing */
    #themeToggle {
        display: none !important;
    }

    /* Loading Animation Artistique */
    .loading-spinner {
        width: 50px;
        height: 50px;
        border: 4px solid rgba(248, 187, 208, 0.3);
        border-top: 4px solid var(--dore-vintage);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    /* Effets de particules artistiques */
    .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: var(--gradient-vintage);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
    }

    @keyframes float {

        0%,
        100% {
            transform: translateY(0px) rotate(0deg);
            opacity: 0.7;
        }

        50% {
            transform: translateY(-20px) rotate(180deg);
            opacity: 1;
        }
    }

    /* ==========================
       CARTES EXPERTES ULTRA-MODERNES
       ========================== */

    .expert-card {
        position: relative;
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        transform-style: preserve-3d;
    }

    .expert-card:hover {
        transform: translateY(-20px) rotateX(5deg) rotateY(5deg);
        z-index: 10;
    }

    .expert-card .group {
        position: relative;
        overflow: hidden;
        border-radius: 2rem;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow:
            0 8px 32px rgba(0, 0, 0, 0.1),
            0 0 0 1px rgba(255, 255, 255, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }

    .expert-card:hover .group {
        box-shadow:
            0 25px 50px rgba(0, 0, 0, 0.15),
            0 0 0 1px rgba(255, 255, 255, 0.2),
            inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }

    /* Animation des étoiles */
    .star-pulse {
        animation: starPulse 2s ease-in-out infinite;
    }

    .star-delay-0 {
        animation-delay: 0.1s;
    }

    .star-delay-1 {
        animation-delay: 0.2s;
    }

    .star-delay-2 {
        animation-delay: 0.3s;
    }

    .star-delay-3 {
        animation-delay: 0.4s;
    }

    .star-delay-4 {
        animation-delay: 0.5s;
    }

    @keyframes starPulse {

        0%,
        100% {
            transform: scale(1);
            opacity: 0.8;
        }

        50% {
            transform: scale(1.2);
            opacity: 1;
        }
    }

    /* Effet de brillance sur les cartes */
    .expert-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
        transition: left 0.6s ease;
        z-index: 1;
    }

    .expert-card:hover::before {
        left: 100%;
    }

    /* Effet de flou sur l'image au hover */
    .expert-card .group:hover img {
        filter: blur(1px) brightness(1.1);
    }

    /* Animation des badges */
    .expert-card .animate-pulse {
        animation: badgePulse 3s ease-in-out infinite;
    }

    @keyframes badgePulse {

        0%,
        100% {
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.7);
        }

        50% {
            transform: scale(1.05);
            box-shadow: 0 0 0 10px rgba(251, 191, 36, 0);
        }
    }

    /* Effet de parallaxe sur les cartes */
    .expert-card:nth-child(odd) {
        transform: rotateY(-2deg);
    }

    .expert-card:nth-child(even) {
        transform: rotateY(2deg);
    }

    .expert-card:hover {
        transform: translateY(-20px) rotateX(5deg) rotateY(0deg) !important;
    }

    /* Effet de profondeur avec ombres multiples */
    .expert-card .group::after {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: 2rem;
        padding: 1px;
        background: linear-gradient(135deg,
                rgba(255, 255, 255, 0.3) 0%,
                rgba(255, 255, 255, 0.1) 25%,
                transparent 50%,
                rgba(0, 0, 0, 0.1) 75%,
                rgba(0, 0, 0, 0.2) 100%);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask-composite: xor;
        -webkit-mask-composite: xor;
        opacity: 0;
        transition: opacity 0.6s ease;
    }

    .expert-card:hover .group::after {
        opacity: 1;
    }

    /* Animation des boutons d'action */
    .expert-card .group button,
    .expert-card .group a {
        position: relative;
        overflow: hidden;
    }

    .expert-card .group button::before,
    .expert-card .group a::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.5s ease;
    }

    .expert-card .group button:hover::before,
    .expert-card .group a:hover::before {
        left: 100%;
    }

    /* Effet de glassmorphism pour les informations */
    .expert-card .bg-white\/80 {
        background: rgba(255, 255, 255, 0.85);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
    }

    /* Animation d'apparition en cascade */
    .expert-card[data-delay="0"] {
        animation-delay: 0.1s;
    }

    .expert-card[data-delay="1"] {
        animation-delay: 0.2s;
    }

    .expert-card[data-delay="2"] {
        animation-delay: 0.3s;
    }

    .expert-card[data-delay="3"] {
        animation-delay: 0.4s;
    }

    .expert-card[data-delay="4"] {
        animation-delay: 0.5s;
    }

    .expert-card[data-delay="5"] {
        animation-delay: 0.6s;
    }

    .expert-card[data-delay="6"] {
        animation-delay: 0.7s;
    }

    .expert-card[data-delay="7"] {
        animation-delay: 0.8s;
    }

    /* Responsive pour mobile */
    @media (max-width: 768px) {
        .expert-card {
            transform: none !important;
        }

        .expert-card:hover {
            transform: translateY(-10px) !important;
        }

        .expert-card .group {
            border-radius: 1.5rem;
        }

        .expert-card .group::after {
            border-radius: 1.5rem;
        }

        /* Amélioration de la lisibilité mobile */
        .expert-card .group h3 {
            font-size: 1.1rem;
            line-height: 1.3;
        }

        .expert-card .group p {
            font-size: 0.9rem;
        }

        .expert-card .group .text-2xl {
            font-size: 1.5rem;
        }

        /* Espacement optimisé pour mobile */
        .expert-card .group .p-6 {
            padding: 1rem;
        }

        /* Boutons plus grands pour le tactile */
        .expert-card .group button,
        .expert-card .group a {
            min-height: 44px;
            min-width: 44px;
        }
    }

    /* Améliorations pour tablettes */
    @media (max-width: 1024px) and (min-width: 769px) {
        .expert-card .group h3 {
            font-size: 1.2rem;
        }

        .expert-card .group p {
            font-size: 0.95rem;
        }
    }

    /* Cartes visibles par défaut - design épuré sans animations */
    #professionalsCarousel {
        opacity: 1 !important;
        visibility: visible !important;
    }

    .expert-card {
        opacity: 1 !important;
        transform: none !important;
        animation: none !important;
        display: block !important;
        visibility: visible !important;
        min-height: 400px;
    }

    .expert-card * {
        visibility: visible !important;
    }

    .expert-card .professional-card {
        display: block !important;
        opacity: 1 !important;
    }

    /* Classe pour masquer les cartes filtrées */
    .expert-card.hidden-card {
        display: none !important;
        opacity: 0 !important;
        visibility: hidden !important;
    }

    /* Classe pour afficher les cartes */
    .expert-card.show {
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
    }

    /* Effet de focus pour l'accessibilité */
    .expert-card:focus-within {
        outline: 2px solid #ec4899;
        outline-offset: 4px;
    }

    /* Amélioration des contrastes */
    .expert-card .group .text-gray-600 {
        color: #4b5563;
    }

    .expert-card .group .text-gray-500 {
        color: #6b7280;
    }

    /* Effet de chargement des images */
    .expert-card .group img {
        transition: opacity 0.3s ease;
    }

    .expert-card .group img:not([src]) {
        opacity: 0;
    }

    .expert-card .group img[src] {
        opacity: 1;
    }

    /* Styles pour le modal responsive */
    .modal-content {
        max-height: 90vh;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
    }

    /* Smooth scrolling pour le modal */
    .modal-content {
        scroll-behavior: smooth;
    }

    @media (max-width: 768px) {
        .modal-content {
            margin: 0.5rem;
            max-height: 95vh;
            border-radius: 1.5rem;
        }

        .modal-content .p-8 {
            padding: 1.5rem;
        }

        .modal-content h2 {
            font-size: 1.5rem;
        }

        .modal-content h3 {
            font-size: 1.1rem;
        }

        .modal-content .grid {
            gap: 0.75rem;
        }

        .modal-content .flex {
            flex-direction: column;
            gap: 0.75rem;
        }

        .modal-content .flex.flex-col.sm\\:flex-row {
            flex-direction: column;
        }
    }

    /* Animation du modal */
    .modal-content {
        animation: modalSlideIn 0.3s ease-out;
    }

    @keyframes modalSlideIn {
        from {
            opacity: 0;
            transform: scale(0.9) translateY(-20px);
        }

        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }

    /* Amélioration des boutons du modal */
    .modal-content button,
    .modal-content a {
        transition: all 0.2s ease;
    }

    .modal-content button:hover,
    .modal-content a:hover {
        transform: translateY(-1px);
    }

    /* Scrollbar personnalisée pour le modal */
    .modal-content::-webkit-scrollbar {
        width: 6px;
    }

    .modal-content::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
    }

    .modal-content::-webkit-scrollbar-thumb {
        background: #ec4899;
        border-radius: 3px;
    }

    .modal-content::-webkit-scrollbar-thumb:hover {
        background: #db2777;
    }

    /* Visually hidden utility */
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 1px, 1px);
        white-space: nowrap;
        border: 0;
    }

    /* Nouveau design pour le filtre de gouvernorat */
    .gov-filter-pill {
        position: relative;
    }

    .gov-icon {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        color: #ec4899;
        /* rose */
        pointer-events: none;
    }

    #governorateFilter {
        font-weight: 600;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(236, 72, 153, 0.12);
    }

    #governorateFilter:hover {
        box-shadow: 0 6px 14px rgba(236, 72, 153, 0.18);
    }

    /* Styles pour les boutons de carousel */
    .carousel-btn {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
    }

    .carousel-btn:hover {
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4);
    }

    .carousel-btn:active {
        transform: translateY(0) scale(0.98);
    }

    .carousel-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
    }

    .carousel-btn-prev {
        background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
    }

    .carousel-btn-next {
        background: linear-gradient(135deg, #8b5cf6 0%, #ec4899 100%);
    }

    /* Animation pour le changement de page */
    @keyframes fadeInSlide {
        from {
            opacity: 0;
            transform: translateX(30px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .expert-card.show {
        animation: fadeInSlide 0.5s ease-out;
    }

    /* Responsive pour les contrôles */
    @media (max-width: 768px) {
        .carousel-btn {
            width: 40px;
            height: 40px;
        }

        #governorateFilter {
            font-size: 0.875rem;
            padding: 0.5rem 2rem 0.5rem 2rem;
        }
    }

    /* Réduction des animations pour accessibilité */
    @media (prefers-reduced-motion: reduce) {

        *,
        *::before,
        *::after {
            animation: none !important;
            transition: none !important;
        }

        .particle {
            display: none !important;
        }
    }

    /* Styles pour les embeds de réseaux sociaux */
    .social-embed-card {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
        backdrop-filter: blur(10px);
        border-radius: 1rem;
        padding: 1.5rem;
        border: 1px solid rgba(236, 72, 153, 0.2);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
    }

    .social-embed-card:hover {
        box-shadow: 0 8px 20px rgba(236, 72, 153, 0.15);
        transform: translateY(-2px);
    }

    .social-embed-card iframe {
        border-radius: 0.75rem;
    }

    /* Loader pour les embeds */
    .social-embed-card .relative::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 40px;
        height: 40px;
        border: 3px solid #f3f4f6;
        border-top-color: #ec4899;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        to {
            transform: translate(-50%, -50%) rotate(360deg);
        }
    }

    /* Responsive pour les embeds sociaux */
    @media (max-width: 768px) {
        .social-embed-card {
            padding: 1rem;
        }

        #modalSocial {
            grid-template-columns: 1fr;
        }
    }

    /* ====================================
       NOUVEAU DESIGN ÉPURÉ DES CARTES
       ==================================== */

    .professional-card {
        background: white !important;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        transition: all 0.2s ease;
        cursor: pointer;
        display: block !important;
        opacity: 1 !important;
        visibility: visible !important;
    }

    .professional-card:hover {
        box-shadow: 0 8px 24px rgba(236, 72, 153, 0.15);
        transform: translateY(-4px);
    }

    .card-image-container {
        position: relative;
        height: 200px;
        overflow: hidden;
        background: linear-gradient(135deg, #fce4ec 0%, #f3e5f5 100%);
    }

    .card-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .card-placeholder {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .placeholder-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, #ec4899, #8b5cf6);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .card-badges {
        position: absolute;
        top: 12px;
        left: 12px;
        right: 12px;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
    }

    .badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 11px;
        font-weight: 600;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .badge-city {
        background: #3b82f6;
        color: white;
    }

    .badge-cert {
        background: #fbbf24;
        color: #1f2937;
    }

    .card-content {
        padding: 16px;
    }

    .card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 12px;
    }

    .card-title {
        font-size: 16px;
        font-weight: 700;
        color: #1f2937;
        margin: 0 0 4px 0;
        line-height: 1.3;
    }

    .card-subtitle {
        font-size: 13px;
        color: #6b7280;
        margin: 0 0 2px 0;
    }

    .card-specialty {
        font-size: 11px;
        color: #ec4899;
        font-weight: 500;
    }

    .card-price {
        text-align: right;
        flex-shrink: 0;
        margin-left: 12px;
    }

    .price-value {
        font-size: 20px;
        font-weight: 700;
        color: #ec4899;
        display: block;
        line-height: 1;
    }

    .price-label {
        font-size: 10px;
        color: #9ca3af;
        display: block;
        margin-top: 2px;
    }

    .card-rating {
        display: flex;
        align-items: center;
        gap: 6px;
        margin-bottom: 12px;
        padding-bottom: 12px;
        border-bottom: 1px solid #f3f4f6;
    }

    .rating-value {
        font-weight: 700;
        color: #1f2937;
        font-size: 14px;
    }

    .rating-count {
        font-size: 12px;
        color: #9ca3af;
    }

    .card-services {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin-bottom: 12px;
    }

    .service-tag {
        padding: 4px 10px;
        background: #fce7f3;
        color: #be185d;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 500;
    }

    .service-more {
        padding: 4px 10px;
        background: #f3f4f6;
        color: #6b7280;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 500;
    }

    .card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
    }

    .card-availability {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 12px;
        color: #6b7280;
    }

    .card-button {
        padding: 8px 20px;
        background: linear-gradient(135deg, #ec4899, #8b5cf6);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .card-button:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
    }

    /* Adapter les styles existants */
    .expert-card .p-6.bg-white\/90 {
        background: white !important;
        padding: 16px !important;
        margin-top: 0 !important;
        border-radius: 0 0 16px 16px !important;
        border: none !important;
        box-shadow: none !important;
    }

    .expert-card .p-6.bg-white\/90 h3 {
        font-size: 16px !important;
        margin-bottom: 4px !important;
    }

    .expert-card .p-6.bg-white\/90 p.text-sm {
        font-size: 13px !important;
    }

    .expert-card .p-6.bg-white\/90 p.text-xs {
        font-size: 11px !important;
    }

    .expert-card .p-6.bg-white\/90 .text-2xl {
        font-size: 20px !important;
    }

    .expert-card .p-6.bg-white\/90 button {
        padding: 8px 20px !important;
        background: linear-gradient(135deg, #ec4899, #8b5cf6) !important;
        border-radius: 8px !important;
        font-size: 13px !important;
        transform: none !important;
    }

    .expert-card .p-6.bg-white\/90 button:hover {
        transform: scale(1.05) !important;
    }

    /* Masquer la bio pour un design plus épuré */
    .expert-card .line-clamp-2 {
        display: none;
    }

    /* Ajuster les marges */
    .expert-card .mb-4 {
        margin-bottom: 12px !important;
    }

    /* Améliorer les tags de services */
    .expert-card .bg-pink-100 {
        background: #fce7f3 !important;
        color: #be185d !important;
        padding: 4px 10px !important;
        border-radius: 12px !important;
        font-size: 11px !important;
    }

    .expert-card .bg-gray-100 {
        background: #f3f4f6 !important;
        color: #6b7280 !important;
        padding: 4px 10px !important;
        border-radius: 12px !important;
        font-size: 11px !important;
    }

    /* Améliorer le footer avec disponibilité */
    .expert-card .flex.items-center.justify-between:last-child {
        margin-top: 12px !important;
        padding-top: 12px !important;
        border-top: 1px solid #f3f4f6;
    }

    .expert-card .flex.items-center.text-sm.text-gray-500 {
        font-size: 12px !important;
        color: #6b7280 !important;
    }

    /* Séparer le rating */
    .expert-card .flex.items-center.space-x-3 {
        padding-bottom: 12px !important;
        border-bottom: 1px solid #f3f4f6 !important;
    }

    /* Responsive cards */
    @media (max-width: 768px) {
        .card-image-container {
            height: 180px;
        }

        .expert-card .p-6 {
            padding: 12px !important;
        }

        .expert-card h3 {
            font-size: 15px !important;
        }

        .expert-card .text-2xl {
            font-size: 18px !important;
        }

        .expert-card button {
            padding: 6px 16px !important;
            font-size: 12px !important;
        }

        .expert-card .flex.flex-wrap.gap-1 {
            gap: 4px !important;
        }
    }

    /* ====================================
       MODAL RESPONSIVE POUR MOBILE
       ==================================== */

    @media (max-width: 768px) {
        .modal-content {
            margin: 0;
            max-height: 100vh;
            border-radius: 0;
        }

        .modal-content h2 {
            font-size: 1.25rem;
        }

        .modal-content h3 {
            font-size: 1rem;
        }

        .modal-content .p-8 {
            padding: 1.25rem;
        }

        #modalCoverImage {
            height: 200px;
        }

        #modalServices .grid {
            grid-template-columns: 1fr;
        }

        #modalGallery {
            grid-template-columns: 2fr !important;
        }
    }

    @media (max-width: 480px) {
        .modal-content .flex.flex-col.sm\\:flex-row {
            flex-direction: column !important;
        }

        .modal-content .grid.grid-cols-1.md\\:grid-cols-2 {
            grid-template-columns: 1fr !important;
        }

        #closeModal {
            width: 36px;
            height: 36px;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section Artistique -->
<section class="hero-section">
    <div class="hero-bg-pattern"></div>
    <!-- Ornements dorés baroques -->
    <div class="ornament ornament-tl" aria-hidden="true">
        <svg viewBox="0 0 120 120" fill="none">
            <path d="M12 78c20-28 32-40 60-60M20 110c10-18 16-24 34-34M2 56c12-16 22-26 38-38"
                stroke="rgba(232,164,184,.7)" stroke-width="2" stroke-linecap="round" />
        </svg>
    </div>
    <div class="ornament ornament-br" aria-hidden="true">
        <svg viewBox="0 0 120 120" fill="none">
            <path d="M108 42C88 70 76 82 48 102M100 10c-10 18-16 24-34 34M118 64c-12 16-22 26-38 38"
                stroke="rgba(232,164,184,.7)" stroke-width="2" stroke-linecap="round" />
        </svg>
    </div>
    <canvas id="hero3d" class="absolute inset-0 pointer-events-none" style="z-index: 1;"></canvas>

    <!-- Particules artistiques flottantes -->
    <div class="particle" style="top: 20%; left: 10%; animation-delay: 0s;"></div>
    <div class="particle" style="top: 60%; left: 80%; animation-delay: 2s;"></div>
    <div class="particle" style="top: 40%; left: 70%; animation-delay: 4s;"></div>
    <div class="particle" style="top: 80%; left: 20%; animation-delay: 1s;"></div>
    <div class="particle" style="top: 30%; left: 50%; animation-delay: 3s;"></div>

    <div class="relative max-w-7xl mx-auto px-6 py-20" style="z-index: 2;">
        <!-- header provided by base; keep spacing only -->
        <div class="h-2"></div>

        <div class="mt-16 grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
            <!-- Hero Content Artistique -->
            <div class="fade-in-left">
                <div class="inline-flex items-center px-6 py-3 rounded-full glass-card mb-8">
                    <i data-lucide="sparkles" class="w-14 h-12 text-pink-500 mr-3"></i>
                    <span class="artistic-text text-lg" style="color: var(--dore-vintage);">Votre beauté, notre
                        art</span>
                </div>

                <h1 class="text-5xl md:text-6xl font-bold leading-tight mb-8" style="color: var(--noir-doux);">
                    <span class="artistic-text text-4xl md:text-5xl block mb-2"
                        style="color: var(--dore-vintage);">Bienvenue chez</span>
                    <span id="typewriter"
                        class="bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 bg-clip-text text-transparent"></span>
                </h1>

                <p class="text-xl text-gray-600 mb-10 leading-relaxed max-w-lg">
                    Découvrez l'art de la beauté avec nos professionnelles expertes.
                    Des soins personnalisés qui révèlent votre éclat naturel.
                </p>

                <div class="flex flex-col sm:flex-row gap-4 mb-12">
                    <a href="/signup/" class="btn btn-gold text-center">
                        <i data-lucide="heart" class="w-5 h-5 inline mr-2"></i>
                        Découvrir nos soins
                    </a>
                    <a href="#services" class="btn btn-ghost text-center">
                        <i data-lucide="sparkles" class="w-5 h-5 inline mr-2"></i>
                        Nos services
                    </a>
                </div>

                <!-- Stats Artistiques -->
                <div class="grid grid-cols-3 gap-6">
                    <div class="glass-card p-6 text-center">
                        <div class="flex items-center justify-center gap-2 text-3xl font-bold mb-2">
                            <i data-lucide="star" class="w-6 h-6 star-anim"></i>
                            <span style="color: var(--dore-vintage);">4.9</span>
                        </div>
                        <div class="text-sm text-gray-600">Note moyenne</div>
                    </div>
                    <div class="glass-card p-6 text-center">
                        <div class="text-3xl font-bold mb-2" style="color: var(--dore-vintage);">+2.5k</div>
                        <div class="text-sm text-gray-600">Clientes satisfaites</div>
                    </div>
                    <div class="glass-card p-6 text-center">
                        <div class="text-3xl font-bold mb-2" style="color: var(--dore-vintage);">24/7</div>
                        <div class="text-sm text-gray-600">Réservation</div>
                    </div>
                </div>
            </div>

            <!-- Hero Image Artistique -->
            <div class="fade-in-right">
                <div class="relative">
                    <div class="sculpture-frame">
                        <img src="{% static 'images/image2.jpg' %}" alt="Esthétique classique – sculpture et marbre"
                            class="sculpture" loading="eager" decoding="async" fetchpriority="high" />
                        <div class="gold-corners" aria-hidden="true">
                            <span></span><span></span><span></span><span></span>
                        </div>
                        <!-- Frise grecque (SVG) -->

                    </div>
                    <!-- Fresque abstraite (SVG dégradé) -->
                    <svg class="fresco" viewBox="0 0 600 260" aria-hidden="true">
                        <defs>
                            <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
                                <stop offset="0%" stop-color="var(--rose-poudre)" stop-opacity=".65" />
                                <stop offset="60%" stop-color="var(--bleu-clair)" stop-opacity=".55" />
                                <stop offset="100%" stop-color="var(--blanc-creme)" stop-opacity=".45" />
                            </linearGradient>
                        </defs>
                        <path
                            d="M0,220 C90,160 160,180 260,140 C360,100 420,120 520,80 C560,64 590,54 600,50 L600,260 L0,260 Z"
                            fill="url(#g1)" />
                    </svg>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Professionals Section Artistique (moved above services) -->
<section id="professionals" class="py-24"
    style="background: linear-gradient(135deg, var(--blanc-creme) 0%, var(--gris-tres-clair) 100%);">
    <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20 fade-in-up">
            <div class="inline-flex items-center px-6 py-3 rounded-full glass-card mb-6">
                <i data-lucide="users" class="w-12 h-12 text-pink-500 mr-3"></i>
                <span class="artistic-text text-lg" style="color: var(--dore-vintage);">Nos Artistes</span>
            </div>
            <h2 class="text-4xl md:text-5xl font-bold mb-6" style="color: var(--noir-doux);">
                {% if professionals %}
                Nos professionnelles recommandées
                {% else %}
                Rencontrez nos expertes
                {% endif %}
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                {% if professionals %}
                Découvrez nos professionnelles les mieux notées, avec plus de 3.5 étoiles par nos clientes.
                Des expertes passionnées qui transforment votre beauté avec art et excellence.
                {% else %}
                Des professionnelles passionnées et qualifiées, dédiées à révéler votre beauté naturelle avec art et
                expertise.
                {% endif %}
            </p>
        </div>

        {% if professionals %}
        <!-- Barre de filtres et contrôles du carousel -->
        <div class="flex flex-col md:flex-row items-center justify-between mb-8 gap-4">
            <!-- Filtre par gouvernorat uniquement -->
            <div class="flex items-center gap-3 flex-wrap">
                <label for="governorateFilter" class="sr-only">Filtrer par gouvernorat</label>
                <div class="relative gov-filter-pill">
                    <i data-lucide="map-pin" class="gov-icon w-4 h-4" aria-hidden="true"></i>
                    <select id="governorateFilter" name="governorate" aria-label="Filtrer par gouvernorat"
                        title="Filtrer par gouvernorat"
                        class="pl-8 pr-9 py-2 bg-white border-2 border-pink-200 rounded-xl focus:border-pink-500 focus:outline-none transition-all duration-300 cursor-pointer shadow-sm hover:shadow min-h-[44px]">
                        <option value="">Tous les gouvernorats</option>
                        {% for g in governorates %}
                        <option value="{{ g }}">{{ g }}</option>
                        {% endfor %}
                    </select>
                </div>
                <span id="resultCount" class="text-sm text-gray-500 ml-2" role="status" aria-live="polite"></span>
            </div>

            <!-- Contrôles du carousel -->
            <div class="flex items-center gap-3">
                <button id="proPrevBtn" class="carousel-btn carousel-btn-prev" aria-label="Page précédente"
                    aria-controls="professionalsCarousel">
                    <i data-lucide="chevron-left" class="w-6 h-6"></i>
                </button>
                <div class="flex items-center gap-2">
                    <span id="currentPage" class="text-sm font-bold text-pink-500">1</span>
                    <span class="text-sm text-gray-400">/</span>
                    <span id="totalPages" class="text-sm text-gray-500">1</span>
                </div>
                <button id="proNextBtn" class="carousel-btn carousel-btn-next" aria-label="Page suivante"
                    aria-controls="professionalsCarousel">
                    <i data-lucide="chevron-right" class="w-6 h-6"></i>
                </button>
            </div>
        </div>

        <!-- Container du carousel -->
        <div class="relative">
            <!-- Section Ultra-Moderne des Professionnelles Recommandées -->
            <div id="professionalsCarousel" role="region" aria-label="Liste des professionnelles"
                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 lg:gap-8 transition-all duration-500">
                {% for pro in professionals %}
                <div class="expert-card" data-delay="{{ forloop.counter0 }}" data-expert-id="{{ pro.id }}"
                    data-city="{{ pro.city_only }}" data-governorate="{{ pro.governorate }}">
                    <!-- Card Container simplifié et organisé -->
                    <div class="professional-card">
                        <!-- Image principale -->
                        <div class="card-image-container">
                            {% if pro.profile_photo %}
                            <img src="{{ pro.profile_photo }}" alt="{{ pro.full_name }}" class="card-image"
                                loading="lazy" decoding="async"
                                sizes="(min-width:1280px) 25vw, (min-width:1024px) 33vw, (min-width:768px) 50vw, 100vw" />
                            {% elif pro.gallery and pro.gallery|length > 0 %}
                            <img src="{{ pro.gallery.0 }}" alt="{{ pro.full_name }} - Galerie" class="card-image"
                                loading="lazy" decoding="async"
                                sizes="(min-width:1280px) 25vw, (min-width:1024px) 33vw, (min-width:768px) 50vw, 100vw" />
                            {% else %}
                            <div class="card-placeholder">
                                <div class="placeholder-icon">
                                    <i data-lucide="user" class="w-12 h-12 text-white"></i>
                                </div>
                            </div>
                            {% endif %}

                            <!-- Badges sur l'image -->
                            <div class="card-badges">
                                <!-- Badge ville -->
                                {% if pro.city_only %}
                                <div class="badge badge-city">
                                    <i data-lucide="map-pin" class="w-3 h-3 inline mr-1"></i>
                                    {{ pro.city_only }}
                                </div>
                                {% endif %}

                                <!-- Badge certification -->
                                <div class="badge badge-cert">
                                    {{ pro.badge }}
                                </div>
                            </div>
                        </div>

                        <!-- Informations de base (toujours visibles) -->
                        <div
                            class="p-6 bg-white/90 backdrop-blur-sm rounded-2xl -mt-4 relative z-10 border border-white/50 shadow-xl">
                            <!-- Nom et centre -->
                            <div class="mb-4">
                                <h3 class="text-xl font-bold text-gray-800 mb-1">{{ pro.full_name }}</h3>
                                <p class="text-sm text-gray-600 mb-1">{{ pro.business_name }}</p>
                                <p class="text-xs text-pink-500 font-medium">{{ pro.specialty }}</p>
                            </div>

                            <!-- Prix et note -->
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center space-x-3">
                                    <div class="flex items-center">
                                        <i data-lucide="star" class="w-4 h-4 text-yellow-400 mr-1"></i>
                                        <span class="font-bold text-gray-800">{{ pro.rating }}</span>
                                        <span class="text-sm text-gray-500 ml-1">({{ pro.total_reviews }} avis)</span>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="text-2xl font-bold text-pink-500">{{ pro.price }}D</div>
                                    <div class="text-xs text-gray-500">à partir de</div>
                                </div>
                            </div>

                            <!-- Bio courte -->
                            <p class="text-sm text-gray-600 mb-4 line-clamp-2 leading-relaxed">{{
                                pro.bio|truncatewords:12
                                }}</p>

                            <!-- Services preview -->
                            {% if pro.services %}
                            <div class="mb-4">
                                <div class="flex flex-wrap gap-1">
                                    {% for service in pro.services|slice:":2" %}
                                    <span class="px-2 py-1 bg-pink-100 text-pink-700 rounded-full text-xs font-medium">
                                        {{ service.name }}</span>
                                    {% endfor %}
                                    {% if pro.services|length > 2 %}
                                    <span class="px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs">+{{
                                        pro.services|length|add:"-2" }}</span>

                                    {% endif %}
                                </div>
                            </div>
                            {% endif %}

                            <!-- Disponibilité et actions -->
                            <div class="flex items-center justify-between">
                                <div class="flex items-center text-sm text-gray-500">
                                    <i data-lucide="clock" class="w-4 h-4 mr-1"></i>
                                    <span>{{ pro.availability }}</span>
                                </div>

                                <!-- Bouton d'action principal -->
                                <button
                                    class="px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-lg text-sm font-semibold hover:from-pink-600 hover:to-purple-600 transition-all duration-300 transform hover:scale-105"
                                    aria-label="Voir les détails de {{ pro.full_name }}">
                                    Voir détails
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <!-- Message si aucune experte 5 étoiles -->
        <div class="text-center py-16">
            <div
                class="inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-pink-100 to-purple-100 rounded-full mb-6">
                <i data-lucide="star" class="w-12 h-12 text-pink-500"></i>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-4">Nos professionnelles se préparent</h3>
            <p class="text-gray-600 max-w-md mx-auto mb-8">
                Nos professionnelles travaillent dur pour mériter leurs étoiles.
                Revenez bientôt pour découvrir nos expertes recommandées !
            </p>
            <a href="/signup/" class="btn-primary inline-flex items-center">
                <i data-lucide="user-plus" class="w-5 h-5 mr-2"></i>
                Rejoindre notre communauté
            </a>
        </div>
        {% endif %}

        <!-- CTA Professionnels -->

    </div>
</section>

<!-- Services Section Artistique -->
<section id="services" class="py-24" style="background: var(--blanc-creme);">
    <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20 fade-in-up">
            <div class="inline-flex items-center px-6 py-3 rounded-full glass-card mb-6">
                <i data-lucide="sparkles" class="w-12 h-12 text-pink-500 mr-3"></i>
                <span class="artistic-text text-lg" style="color: var(--dore-vintage);">Nos Services</span>
            </div>
            <h2 class="text-4xl md:text-5xl font-bold mb-6" style="color: var(--noir-doux);">
                L'art de la beauté
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Découvrez notre gamme complète de services beauté, réalisés avec passion et expertise par nos
                professionnelles qualifiées.
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Service 1: Coiffure -->
            <div class="service-card fade-in-up" style="animation-delay: 0.1s;">
                <div class="service-icon bg-gradient-to-br from-pink-400 to-pink-500">
                    <i data-lucide="scissors" class="w-8 h-8 text-white relative z-10"></i>
                </div>
                <h3 class="text-2xl font-bold mb-4" style="color: var(--noir-doux);">Coiffure</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                    Coupe, brushing, coloration, balayage et soins capillaires personnalisés pour révéler votre beauté
                    naturelle.
                </p>
                <div class="flex items-center text-sm font-medium" style="color: var(--dore-vintage);">
                    <i data-lucide="clock" class="w-4 h-4 mr-2"></i>
                    <span>1h - 3h</span>
                </div>
            </div>

            <!-- Service 2: Esthétique -->
            <div class="service-card fade-in-up" style="animation-delay: 0.2s;">
                <div class="service-icon bg-gradient-to-br from-blue-400 to-blue-500">
                    <i data-lucide="sparkles" class="w-8 h-8 text-white relative z-10"></i>
                </div>
                <h3 class="text-2xl font-bold mb-4" style="color: var(--noir-doux);">Esthétique</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                    Soins du visage, épilation, maquillage et traitements anti-âge pour une peau éclatante et radieuse.
                </p>
                <div class="flex items-center text-sm font-medium" style="color: var(--dore-vintage);">
                    <i data-lucide="clock" class="w-4 h-4 mr-2"></i>
                    <span>30min - 2h</span>
                </div>
            </div>

            <!-- Service 3: Manucure -->
            <div class="service-card fade-in-up" style="animation-delay: 0.3s;">
                <div class="service-icon bg-gradient-to-br from-purple-400 to-purple-500">
                    <i data-lucide="hand" class="w-8 h-8 text-white relative z-10"></i>
                </div>
                <h3 class="text-2xl font-bold mb-4" style="color: var(--noir-doux);">Manucure</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                    Vernis classique, gel, nail art et soins des ongles pour des mains parfaitement soignées.
                </p>
                <div class="flex items-center text-sm font-medium" style="color: var(--dore-vintage);">
                    <i data-lucide="clock" class="w-4 h-4 mr-2"></i>
                    <span>45min - 1h30</span>
                </div>
            </div>

            <!-- Service 4: Massage -->
            <div class="service-card fade-in-up" style="animation-delay: 0.4s;">
                <div class="service-icon bg-gradient-to-br from-orange-400 to-orange-500">
                    <i data-lucide="heart" class="w-8 h-8 text-white relative z-10"></i>
                </div>
                <h3 class="text-2xl font-bold mb-4" style="color: var(--noir-doux);">Massage</h3>
                <p class="text-gray-600 mb-6 leading-relaxed">
                    Massage relaxant, thérapeutique et soins du corps pour un moment de détente et de bien-être.
                </p>
                <div class="flex items-center text-sm font-medium" style="color: var(--dore-vintage);">
                    <i data-lucide="clock" class="w-4 h-4 mr-2"></i>
                    <span>1h - 2h</span>
                </div>
            </div>
        </div>

        <!-- CTA Services -->
        <div class="text-center mt-16 fade-in-up">
            <a href="{% if user.is_authenticated %}/booking/{% else %}/signup/?next=/booking/{% endif %}"
                class="btn-primary inline-flex items-center">
                <i data-lucide="calendar-plus" class="w-5 h-5 mr-2"></i>
                Réserver un service
            </a>
        </div>
    </div>
</section>

<!-- Professionals Section Artistique (moved) -->

<!-- Modal profil pro (glass) -->
<div id="proModal" class="modal">
    <div class="bg-white/80 backdrop-blur-xl rounded-2xl border shadow-2xl w-[90%] max-w-xl p-6 relative">
        <button type="button"
            class="absolute top-3 right-3 bg-white/70 border rounded-full w-8 h-8 flex items-center justify-center"
            data-close>&times;</button>
        <div class="flex items-start gap-4">
            <div class="w-20 h-20 rounded-xl bg-gradient-to-br from-rose-200 to-blue-200"></div>
            <div class="flex-1">
                <div class="text-lg font-semibold">Nadia Benali</div>
                <div class="text-sm text-gray-600">Esthéticienne – Nabeul</div>
                <div class="mt-2 text-sm">Bio courte: Passionnée par l'art de sublimer.</div>
            </div>
        </div>
        <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
            <div class="bg-white/70 rounded-xl p-3 border">
                <div class="font-medium mb-1">Spécialités</div>
                <ul class="list-disc ml-5 text-gray-700">
                    <li>Soin visage</li>
                    <li>Massage relaxant</li>
                    <li>Épilation</li>
                </ul>
            </div>
            <div class="bg-white/70 rounded-xl p-3 border">
                <div class="font-medium mb-1">Réseaux</div>
                <div class="flex gap-2"><span class="px-2 py-1 rounded bg-gray-100">Instagram</span><span
                        class="px-2 py-1 rounded bg-gray-100">Facebook</span></div>
            </div>
        </div>
    </div>
</div>

<!-- Testimonials Section Artistique -->
<section id="testimonials" class="py-24" style="background: var(--gradient-hero);">
    <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20 fade-in-up">
            <div class="inline-flex items-center px-6 py-3 rounded-full glass-card mb-6">
                <i data-lucide="heart" class="w-5 h-5 text-pink-500 mr-3"></i>
                <span class="artistic-text text-lg" style="color: var(--dore-vintage);">Témoignages</span>
            </div>
            <h2 class="text-4xl md:text-5xl font-bold mb-6" style="color: var(--noir-doux);">
                Elles nous font confiance
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Découvrez les témoignages authentiques de nos clientes qui nous font confiance pour leur beauté.
            </p>
        </div>

        <div class="testimonials-carousel fade-in-up">
            <div class="testimonials-track" id="tTrack">
                <!-- Témoignage 1 -->
                <div class="testimonial-card" data-index="0">
                    <div class="flex items-center mb-6">
                        <div
                            class="w-16 h-16 rounded-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center mr-4">
                            <i data-lucide="user" class="w-8 h-8 text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold" style="color: var(--noir-doux);">Marie Dubois</h3>
                            <div class="flex items-center mt-1">
                                <div class="flex space-x-1">
                                    {% for star in "12345" %}
                                    <i data-lucide="star" class="w-4 h-4 text-yellow-400 fill-current"></i>
                                    {% endfor %}
                                </div>
                                <span class="text-sm text-gray-600 ml-2">5.0</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-600 leading-relaxed mb-4">
                        "Service impeccable, accueil chaleureux et résultats parfaits.
                        L'équipe est vraiment à l'écoute et professionnelle. Je recommande vivement !"
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-500">15 Jan 2025</span>
                        <div class="flex items-center text-sm font-medium" style="color: var(--dore-vintage);">
                            <i data-lucide="check-circle" class="w-4 h-4 mr-1"></i>
                            <span>Vérifié</span>
                        </div>
                    </div>
                </div>

                <!-- Témoignage 2 -->
                <div class="testimonial-card" data-index="1">
                    <div class="flex items-center mb-6">
                        <div
                            class="w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center mr-4">
                            <i data-lucide="user" class="w-8 h-8 text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold" style="color: var(--noir-doux);">Sophie Martin</h3>
                            <div class="flex items-center mt-1">
                                <div class="flex space-x-1">
                                    {% for star in "12345" %}
                                    <i data-lucide="star" class="w-4 h-4 text-yellow-400 fill-current"></i>
                                    {% endfor %}
                                </div>
                                <span class="text-sm text-gray-600 ml-2">5.0</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-600 leading-relaxed mb-4">
                        "Très professionnelle et à l'écoute, je recommande.
                        L'ambiance est relaxante et les résultats dépassent mes attentes."
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-500">16 Jan 2025</span>
                        <div class="flex items-center text-sm font-medium" style="color: var(--dore-vintage);">
                            <i data-lucide="check-circle" class="w-4 h-4 mr-1"></i>
                            <span>Vérifié</span>
                        </div>
                    </div>
                </div>

                <!-- Témoignage 3 -->
                <div class="testimonial-card" data-index="2">
                    <div class="flex items-center mb-6">
                        <div
                            class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center mr-4">
                            <i data-lucide="user" class="w-8 h-8 text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold" style="color: var(--noir-doux);">Anne Leroy</h3>
                            <div class="flex items-center mt-1">
                                <div class="flex space-x-1">
                                    {% for star in "12345" %}
                                    <i data-lucide="star" class="w-4 h-4 text-yellow-400 fill-current"></i>
                                    {% endfor %}
                                </div>
                                <span class="text-sm text-gray-600 ml-2">5.0</span>
                            </div>
                        </div>
                    </div>
                    <p class="text-gray-600 leading-relaxed mb-4">
                        "Réservation simple et rapide, expérience parfaite.
                        L'équipe est exceptionnelle et l'attention aux détails est remarquable."
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-gray-500">18 Jan 2025</span>
                        <div class="flex items-center text-sm font-medium" style="color: var(--dore-vintage);">
                            <i data-lucide="check-circle" class="w-4 h-4 mr-1"></i>
                            <span>Vérifié</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation du carousel -->
            <div class="flex justify-center mt-8 space-x-4">
                <button
                    class="w-12 h-12 rounded-full bg-white bg-opacity-20 flex items-center justify-center hover:bg-opacity-30 transition-all duration-300"
                    id="tPrevBtn" aria-label="Témoignage précédent">
                    <i data-lucide="chevron-left" class="w-6 h-6 text-white"></i>
                </button>
                <button
                    class="w-12 h-12 rounded-full bg-white bg-opacity-20 flex items-center justify-center hover:bg-opacity-30 transition-all duration-300"
                    id="tNextBtn" aria-label="Témoignage suivant">
                    <i data-lucide="chevron-right" class="w-6 h-6 text-white"></i>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Contact section removed: info moved to footer -->
<section id="contact" class="hidden">
    <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20 fade-in-up">
            <div class="inline-flex items-center px-6 py-3 rounded-full glass-card mb-6">
                <i data-lucide="mail" class="w-5 h-5 text-pink-500 mr-3"></i>
                <span class="artistic-text text-lg" style="color: var(--dore-vintage);">Contact</span>
            </div>
            <h2 class="text-4xl md:text-5xl font-bold mb-6" style="color: var(--noir-doux);">
                Prenons contact
            </h2>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">
                Une question ? Un projet ? N'hésitez pas à nous contacter. Notre équipe est là pour vous accompagner.
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <!-- Formulaire de contact artistique -->
            <div class="fade-in-left">
                <div class="contact-form">
                    <h3 class="text-2xl font-bold mb-8" style="color: var(--noir-doux);">
                        Envoyez-nous un message
                    </h3>

                    <form class="space-y-6">
                        <div class="form-group">
                            <input type="text" class="form-input" placeholder=" " required>
                            <label class="form-label">Nom complet</label>
                        </div>

                        <div class="form-group">
                            <input type="email" class="form-input" placeholder=" " required>
                            <label class="form-label">Adresse email</label>
                        </div>

                        <div class="form-group">
                            <input type="tel" class="form-input" placeholder=" ">
                            <label class="form-label">Téléphone (optionnel)</label>
                        </div>

                        <div class="form-group">
                            <select class="form-input" required>
                                <option value="">Sélectionnez un service</option>
                                <option value="coiffure">Coiffure</option>
                                <option value="esthetique">Esthétique</option>
                                <option value="manucure">Manucure</option>
                                <option value="massage">Massage</option>
                                <option value="autre">Autre</option>
                            </select>
                            <label class="form-label">Service souhaité</label>
                        </div>

                        <div class="form-group">
                            <textarea class="form-input" rows="4" placeholder=" " required></textarea>
                            <label class="form-label">Votre message</label>
                        </div>

                        <button type="submit" class="btn-primary w-full">
                            <i data-lucide="send" class="w-5 h-5 mr-2"></i>
                            Envoyer le message
                        </button>
                    </form>
                </div>
            </div>

            <!-- Informations de contact et carte -->
            <div class="fade-in-right">
                <!-- Informations de contact -->
                <div class="space-y-8 mb-8">
                    <div class="glass-card p-6">
                        <div class="flex items-center mb-4">
                            <div
                                class="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center mr-4">
                                <i data-lucide="map-pin" class="w-6 h-6 text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold" style="color: var(--noir-doux);">Adresse</h3>
                                <p class="text-gray-600">123 Avenue de la Beauté<br>Nabeul, Tunisie</p>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card p-6">
                        <div class="flex items-center mb-4">
                            <div
                                class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center mr-4">
                                <i data-lucide="phone" class="w-6 h-6 text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold" style="color: var(--noir-doux);">Téléphone</h3>
                                <p class="text-gray-600">+216 12 345 678</p>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card p-6">
                        <div class="flex items-center mb-4">
                            <div
                                class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center mr-4">
                                <i data-lucide="mail" class="w-6 h-6 text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold" style="color: var(--noir-doux);">Email</h3>
                                <p class="text-gray-600">contact@coucoubeaute.com</p>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card p-6">
                        <div class="flex items-center mb-4">
                            <div
                                class="w-12 h-12 rounded-xl bg-gradient-to-br from-orange-400 to-orange-500 flex items-center justify-center mr-4">
                                <i data-lucide="clock" class="w-6 h-6 text-white"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold" style="color: var(--noir-doux);">Horaires</h3>
                                <p class="text-gray-600">
                                    Lun - Ven: 9h00 - 19h00<br>
                                    Sam: 9h00 - 17h00<br>
                                    Dim: Fermé
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Carte -->
                <div class="glass-card p-2">
                    <iframe id="gmap" title="map" class="w-full h-[300px] rounded-xl" loading="lazy" allowfullscreen
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3239.493!2d10.735!3d36.451!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2z!5e0!3m2!1sfr!2stn!4v1700000000000"></iframe>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer Artistique -->
<footer class="py-16 footer-elegant"
    style="background: linear-gradient(135deg, var(--blanc-creme) 0%, var(--rose-doux) 60%, var(--bleu-doux) 100%);">
    <div class="max-w-7xl mx-auto px-6">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
            <!-- Logo et description -->
            <div class="lg:col-span-2 footer-panel p-6">
                <div class="flex items-center mb-6">
                    <div class="w-35 h-28 flex items-center justify-center mr-4 overflow-hidden">
                        <img src="{% static 'images/logo-coucou-beaute.png' %}" alt="Coucou Beauté"
                            class="w-full h-full object-contain" />
                    </div>

                </div>
                <p class="text-gray-700 leading-relaxed mb-6 max-w-md">
                    Votre institut de beauté de confiance à Nabeul. Nous vous accompagnons dans votre quête de beauté
                    avec passion, expertise et professionnalisme.
                </p>
                <div class="flex space-x-4">
                    <a href="#"
                        class="w-10 h-10 rounded-full bg-white bg-opacity-10 flex items-center justify-center hover:bg-opacity-20 transition-all duration-300">
                        <i data-lucide="facebook" class="w-5 h-5" style="color: var(--dore-vintage);"></i>
                    </a>
                    <a href="#"
                        class="w-10 h-10 rounded-full bg-white bg-opacity-10 flex items-center justify-center hover:bg-opacity-20 transition-all duration-300">
                        <i data-lucide="instagram" class="w-5 h-5" style="color: var(--dore-vintage);"></i>
                    </a>
                    <a href="#"
                        class="w-10 h-10 rounded-full bg-white bg-opacity-10 flex items-center justify-center hover:bg-opacity-20 transition-all duration-300">
                        <i data-lucide="twitter" class="w-5 h-5" style="color: var(--dore-vintage);"></i>
                    </a>
                    <a href="#"
                        class="w-10 h-10 rounded-full bg-white bg-opacity-10 flex items-center justify-center hover:bg-opacity-20 transition-all duration-300">
                        <i data-lucide="youtube" class="w-5 h-5" style="color: var(--dore-vintage);"></i>
                    </a>
                </div>
            </div>

            <!-- Services -->
            <div class="footer-panel p-6">
                <h4 class="text-lg font-bold mb-6" style="color: var(--rose-vintage);">Nos Services</h4>
                <ul class="space-y-3">
                    <li><a href="#"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">Coiffure</a>
                    </li>
                    <li><a href="#"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">Esthétique</a>
                    </li>
                    <li><a href="#"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">Manucure</a>
                    </li>
                    <li><a href="#"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">Massage</a>
                    </li>
                    <li><a href="#"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">Soins du
                            visage</a></li>
                </ul>
            </div>

            <!-- Liens rapides -->
            <div class="footer-panel p-6">
                <h4 class="text-lg font-bold mb-6" style="color: var(--rose-vintage);">Liens Rapides</h4>
                <ul class="space-y-3">
                    <li><a href="#about"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">À
                            propos</a></li>
                    <li><a href="#services"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">Services</a>
                    </li>
                    <li><a href="#professionals"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">Professionnelles</a>
                    </li>
                    <li><a href="#testimonials"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">Témoignages</a>
                    </li>
                    <li><a href="#contact"
                            class="footer-link text-gray-700 hover:text-black transition-colors duration-300">Contact</a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Informations de contact -->
        <div class="border-t border-gray-700 pt-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="flex items-center">
                    <i data-lucide="map-pin" class="w-5 h-5 text-pink-500 mr-3"></i>
                    <span class="text-gray-700">123 Avenue de la Beauté, Nabeul, Tunisie</span>
                </div>
                <div class="flex items-center">
                    <i data-lucide="phone" class="w-5 h-5 text-pink-500 mr-3"></i>
                    <span class="text-gray-700">+216 12 345 678</span>
                </div>
                <div class="flex items-center">
                    <i data-lucide="mail" class="w-5 h-5 text-pink-500 mr-3"></i>
                    <span class="text-gray-700">contact@coucoubeaute.com</span>
                </div>
            </div>

            <!-- Copyright -->
            <div class="text-center text-gray-600 text-sm">
                <p>&copy; 2025 Coucou Beauté. Tous droits réservés. |
                    <a href="#" class="hover:text-black transition-colors duration-300">Mentions légales</a> |
                    <a href="#" class="hover:text-black transition-colors duration-300">Politique de confidentialité</a>
                </p>
            </div>
        </div>
    </div>
</footer>
</div>
</section>
{% endblock %}

{% block extra_js %}
<script src="https://unpkg.com/lucide@latest"></script>
<script>
    window.lucide && window.lucide.createIcons();
</script>
<script id="authState"
    type="application/json">{% if user.is_authenticated %}{"isAuthenticated": true}{% else %}{"isAuthenticated": false}{% endif %}</script>
<script>
    (function () {
        try {
            var auth = JSON.parse(document.getElementById('authState').textContent);
            window.IS_AUTHENTICATED = !!(auth && auth.isAuthenticated);
        } catch (e) { window.IS_AUTHENTICATED = false; }
        window.redirectWithSignup = function (nextUrl) {
            var next = encodeURIComponent(nextUrl || '/');
            return '/signup/?next=' + next;
        };
    })();
</script>
<!-- Three.js + Lottie + GSAP -->
<script defer src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>
<script defer src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
<script defer src="https://unpkg.com/gsap@3.12.5/dist/gsap.min.js"></script>
<script defer src="https://unpkg.com/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
<script>
    const REDUCE_MOTION = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    // Initialiser GSAP ScrollTrigger si animations autorisées
    if (!REDUCE_MOTION && window.gsap && window.ScrollTrigger) {
        gsap.registerPlugin(ScrollTrigger);
    }

    // Typewriter effect artistique
    (function () {
        if (REDUCE_MOTION) return;
        const el = document.getElementById('typewriter');
        if (!el) return;

        const texts = [
            "Coucou Beauté",
            "L'art de la beauté",
            "Votre éclat naturel"
        ];
        let textIndex = 0;
        let charIndex = 0;
        let isDeleting = false;

        function typeWriter() {
            const currentText = texts[textIndex];

            if (isDeleting) {
                el.textContent = currentText.substring(0, charIndex - 1);
                charIndex--;
            } else {
                el.textContent = currentText.substring(0, charIndex + 1);
                charIndex++;
            }

            let typeSpeed = isDeleting ? 50 : 100;

            if (!isDeleting && charIndex === currentText.length) {
                typeSpeed = 2000; // Pause avant de commencer à effacer
                isDeleting = true;
            } else if (isDeleting && charIndex === 0) {
                isDeleting = false;
                textIndex = (textIndex + 1) % texts.length;
                typeSpeed = 500; // Pause avant de commencer à taper
            }

            setTimeout(typeWriter, typeSpeed);
        }

        typeWriter();
    })();

    // Animations d'apparition au scroll
    (function () {
        if (REDUCE_MOTION) return;
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Observer tous les éléments avec des classes d'animation
        document.querySelectorAll('.fade-in-up, .fade-in-left, .fade-in-right').forEach(el => {
            observer.observe(el);
        });
    })();

    // Carousel de témoignages artistique
    (function () {
        const track = document.getElementById('tTrack');
        const prevBtn = document.getElementById('tPrevBtn');
        const nextBtn = document.getElementById('tNextBtn');

        if (!track || !prevBtn || !nextBtn) return;

        const cards = track.querySelectorAll('.testimonial-card');
        const cardWidth = 350; // Largeur d'une carte + gap
        let currentIndex = 0;

        function updateCarousel() {
            const translateX = -currentIndex * cardWidth;
            gsap.to(track, {
                duration: 1,
                x: translateX,
                ease: "power2.inOut"
            });
        }

        function nextSlide() {
            currentIndex = (currentIndex + 1) % cards.length;
            updateCarousel();
        }

        function prevSlide() {
            currentIndex = (currentIndex - 1 + cards.length) % cards.length;
            updateCarousel();
        }

        nextBtn.addEventListener('click', nextSlide);
        prevBtn.addEventListener('click', prevSlide);

        // Auto-play
        if (!REDUCE_MOTION) setInterval(nextSlide, 5000);

        // Effets 3D au hover
        cards.forEach((card, index) => {
            card.addEventListener('mouseenter', () => {
                gsap.to(card, {
                    duration: 0.5,
                    scale: 1.05,
                    rotateY: 8,
                    z: 30,
                    ease: "power2.out"
                });
            });

            card.addEventListener('mouseleave', () => {
                gsap.to(card, {
                    duration: 0.5,
                    scale: 1,
                    rotateY: 0,
                    z: 0,
                    ease: "power2.out"
                });
            });
        });
    })();

    // Effets hover pour les cartes de services
    (function () {
        if (REDUCE_MOTION) return;
        document.querySelectorAll('.service-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                gsap.to(card, {
                    duration: 0.5,
                    y: -15,
                    scale: 1.02,
                    ease: "power2.out"
                });
            });

            card.addEventListener('mouseleave', () => {
                gsap.to(card, {
                    duration: 0.5,
                    y: 0,
                    scale: 1,
                    ease: "power2.out"
                });
            });
        });
    })();

    // Effets hover pour les cartes de professionnelles
    (function () {
        if (REDUCE_MOTION) return;
        document.querySelectorAll('.pro-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                gsap.to(card, {
                    duration: 0.5,
                    y: -12,
                    rotateX: 3,
                    ease: "power2.out"
                });
            });

            card.addEventListener('mouseleave', () => {
                gsap.to(card, {
                    duration: 0.5,
                    y: 0,
                    rotateX: 0,
                    ease: "power2.out"
                });
            });
        });
    })();

    // Effets de particules flottantes
    (function () {
        if (REDUCE_MOTION) return;
        const particles = document.querySelectorAll('.particle');
        particles.forEach((particle, index) => {
            gsap.to(particle, {
                duration: 6 + Math.random() * 4,
                y: -20 - Math.random() * 20,
                x: Math.random() * 20 - 10,
                rotation: 360,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut",
                delay: index * 0.5
            });
        });
    })();

    // Animation des étoiles
    (function () {
        if (REDUCE_MOTION) return;
        document.querySelectorAll('.star-anim').forEach((star, index) => {
            gsap.to(star, {
                duration: 2.5,
                rotation: 360,
                scale: 1.3,
                repeat: -1,
                yoyo: true,
                ease: "power2.inOut",
                delay: index * 0.2
            });
        });
    })();

    // Effets de focus pour les inputs
    (function () {
        if (REDUCE_MOTION) return;
        document.querySelectorAll('.form-input').forEach(input => {
            input.addEventListener('focus', () => {
                gsap.to(input, {
                    duration: 0.3,
                    scale: 1.02,
                    ease: "power2.out"
                });
            });

            input.addEventListener('blur', () => {
                gsap.to(input, {
                    duration: 0.3,
                    scale: 1,
                    ease: "power2.out"
                });
            });
        });
    })();

    // Animation de chargement
    (function () {
        window.addEventListener('load', () => {
            gsap.from('.loading-spinner', {
                duration: 1,
                scale: 0,
                rotation: 360,
                ease: "back.out(1.7)"
            });
        });
    })();

    // Smooth scrolling pour les liens de navigation
    (function () {
        document.querySelectorAll('a[href^="#"]').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href');
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    gsap.to(window, {
                        duration: 1,
                        scrollTo: {
                            y: targetElement,
                            offsetY: 80
                        },
                        ease: "power2.inOut"
                    });
                }
            });
        });
    })();

    // Effets de boutons
    (function () {
        document.querySelectorAll('.btn-primary, .btn-secondary').forEach(btn => {
            btn.addEventListener('mouseenter', () => {
                gsap.to(btn, {
                    duration: 0.3,
                    y: -3,
                    scale: 1.05,
                    ease: "power2.out"
                });
            });

            btn.addEventListener('mouseleave', () => {
                gsap.to(btn, {
                    duration: 0.3,
                    y: 0,
                    scale: 1,
                    ease: "power2.out"
                });
            });
        });
    })();

    // Désactivé les animations GSAP excessives pour un design épuré
    // Les cartes utilisent maintenant CSS pour les transitions simples
    /*
        expertCards.forEach((card, index) => {
            // Animation d'entrée
            gsap.fromTo(card, {
                opacity: 0,
                y: 100,
                rotationX: -15,
                rotationY: 10,
                scale: 0.8
            }, {
                opacity: 1,
                y: 0,
                rotationX: 0,
                rotationY: 0,
                scale: 1,
                duration: 1.2,
                delay: index * 0.15,
                ease: "back.out(1.7)"
            });

            // Animation de hover avec effet 3D
            card.addEventListener('mouseenter', () => {
                gsap.to(card, {
                    duration: 0.6,
                    y: -20,
                    rotationX: 5,
                    rotationY: 5,
                    scale: 1.05,
                    z: 50,
                    ease: "power2.out"
                });

                // Animation des étoiles
                const stars = card.querySelectorAll('.star-pulse');
                stars.forEach((star, starIndex) => {
                    gsap.to(star, {
                        duration: 0.3,
                        scale: 1.3,
                        rotation: 360,
                        delay: starIndex * 0.1,
                        ease: "back.out(1.7)"
                    });
                });
            });

            card.addEventListener('mouseleave', () => {
                gsap.to(card, {
                    duration: 0.6,
                    y: 0,
                    rotationX: 0,
                    rotationY: 0,
                    scale: 1,
                    z: 0,
                    ease: "power2.out"
                });

                // Reset des étoiles
                const stars = card.querySelectorAll('.star-pulse');
                gsap.to(stars, {
                    duration: 0.3,
                    scale: 1,
                    rotation: 0,
                    ease: "power2.out"
                });
            });

            // Animation de clic
            card.addEventListener('click', () => {
                gsap.to(card, {
                    duration: 0.1,
                    scale: 0.95,
                    yoyo: true,
                    repeat: 1,
                    ease: "power2.inOut"
                });
            });
        });

        // Animation des badges flottants
        const badges = document.querySelectorAll('.animate-pulse');
        badges.forEach((badge, index) => {
            gsap.to(badge, {
                duration: 2,
                y: -5,
                ease: "sine.inOut",
                yoyo: true,
                repeat: -1,
                delay: index * 0.2
            });
        });

        // Effet de parallaxe sur le scroll
        window.addEventListener('scroll', () => {
            expertCards.forEach((card, index) => {
                const rect = card.getBoundingClientRect();
                const isVisible = rect.top < window.innerHeight && rect.bottom > 0;

                if (isVisible) {
                    const speed = (index % 2 === 0) ? 0.5 : -0.5;
                    const yPos = -(rect.top - window.innerHeight / 2) * speed;

                    gsap.to(card, {
                        duration: 0.3,
                        y: yPos,
                        ease: "power2.out"
                    });
                }
            });
        });

        // Animation des boutons d'action
        const actionButtons = document.querySelectorAll('.expert-card button, .expert-card a');
        actionButtons.forEach(btn => {
            btn.addEventListener('mouseenter', () => {
                gsap.to(btn, {
                    duration: 0.3,
                    scale: 1.1,
                    rotation: 5,
                    ease: "back.out(1.7)"
                });
            });

            btn.addEventListener('mouseleave', () => {
                gsap.to(btn, {
                    duration: 0.3,
                    scale: 1,
                    rotation: 0,
                    ease: "power2.out"
                });
            });
        });

        // Effet de brillance sur les cartes
        expertCards.forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateX = (y - centerY) / 10;
                const rotateY = (centerX - x) / 10;

                gsap.to(card, {
                    duration: 0.3,
                    rotationX: rotateX,
                    rotationY: rotateY,
                    ease: "power2.out"
                });
            });

            card.addEventListener('mouseleave', () => {
                gsap.to(card, {
                    duration: 0.6,
                    rotationX: 0,
                    rotationY: 0,
                    ease: "power2.out"
                });
            });
        });
    */

    // Three.js background artistique
    (function () {
        const canvas = document.getElementById('hero3d');
        const skipHeavy = window.matchMedia('(prefers-reduced-motion: reduce)').matches || window.innerWidth < 768;
        if (!canvas || !window.THREE || skipHeavy) return;

        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(55, innerWidth / innerHeight, 0.1, 100);
        camera.position.z = 9;

        renderer.setPixelRatio(Math.min(devicePixelRatio, 2));
        renderer.setSize(innerWidth, innerHeight);

        // Lumière ambiante douce
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
        scene.add(ambientLight);

        // Créer un gradient artistique
        function createGradientTexture() {
            const size = 256;
            const canvas = document.createElement('canvas');
            canvas.width = canvas.height = size;
            const ctx = canvas.getContext('2d');

            const gradient = ctx.createRadialGradient(size / 2, size / 2, 0, size / 2, size / 2, size / 2);
            gradient.addColorStop(0, 'rgba(248, 187, 208, 0.8)');
            gradient.addColorStop(0.3, 'rgba(168, 213, 226, 0.6)');
            gradient.addColorStop(0.6, 'rgba(179, 229, 252, 0.4)');
            gradient.addColorStop(1, 'rgba(251, 233, 231, 0.2)');

            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, size, size);

            return new THREE.CanvasTexture(canvas);
        }

        const geometry = new THREE.PlaneGeometry(18, 10, 64, 64);
        const material = new THREE.MeshBasicMaterial({
            map: createGradientTexture(),
            transparent: true,
            opacity: 0.7
        });
        const aurora = new THREE.Mesh(geometry, material);
        aurora.position.z = -2;
        scene.add(aurora);

        // Particules flottantes
        const particleGroup = new THREE.Group();
        scene.add(particleGroup);

        const particleGeometry = new THREE.SphereGeometry(0.02, 8, 8);
        const particleMaterial = new THREE.MeshBasicMaterial({
            color: 0xffffff,
            transparent: true,
            opacity: 0.8
        });

        for (let i = 0; i < 150; i++) {
            const particle = new THREE.Mesh(particleGeometry, particleMaterial);
            particle.position.set(
                (Math.random() - 0.5) * 18,
                (Math.random() - 0.2) * 10,
                -1.5 - Math.random() * 2
            );
            particle.userData = {
                vy: 0.003 + Math.random() * 0.003,
                vx: (Math.random() - 0.5) * 0.001
            };
            particleGroup.add(particle);
        }

        function onResize() {
            camera.aspect = innerWidth / innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(innerWidth, innerHeight);
        }

        window.addEventListener('resize', onResize);

        let time = 0;
        function animate() {
            requestAnimationFrame(animate);
            time += 0.005;

            // Animation de l'aurora
            aurora.rotation.z = Math.sin(time) * 0.05;
            aurora.rotation.x = Math.cos(time * 0.7) * 0.03;

            // Animation des particules
            particleGroup.children.forEach(particle => {
                particle.position.y += particle.userData.vy;
                particle.position.x += particle.userData.vx;

                if (particle.position.y > 5) {
                    particle.position.y = -3 - Math.random() * 2;
                    particle.position.x = (Math.random() - 0.5) * 18;
                }

                if (particle.position.x > 9 || particle.position.x < -9) {
                    particle.userData.vx *= -1;
                }
            });

            renderer.render(scene, camera);
        }

        animate();
    })();
</script>

<!-- Modal Popup pour les détails des professionnelles -->
<div id="professionalModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
    <div class="flex items-center justify-center min-h-screen px-4 py-8 text-center">
        <!-- Overlay -->
        <div class="fixed inset-0 transition-opacity bg-black bg-opacity-75 modal-overlay"></div>

        <!-- Modal Content -->
        <div
            class="relative inline-block w-full max-w-4xl max-h-[90vh] overflow-y-auto p-0 text-left align-middle transition-all transform bg-white shadow-xl rounded-3xl modal-content">
            <!-- Header -->
            <div class="relative">
                <button id="closeModal"
                    class="absolute top-4 right-4 z-10 w-10 h-10 bg-white/90 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white transition-colors duration-200">
                    <i data-lucide="x" class="w-6 h-6 text-gray-600"></i>
                </button>

                <!-- Image de couverture -->
                <div id="modalCoverImage"
                    class="h-64 bg-gradient-to-br from-pink-100 via-purple-50 to-blue-100 rounded-t-3xl overflow-hidden">
                    <img id="modalProfileImage" src="" alt="" class="w-full h-full object-cover">
                </div>

                <!-- Informations de base dans l'header -->
                <div class="absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/80 to-transparent">
                    <div class="flex items-end justify-between text-white">
                        <div>
                            <h2 id="modalName" class="text-3xl font-bold mb-2"></h2>
                            <p id="modalBusiness" class="text-xl text-pink-200 mb-3"></p>
                            <div class="flex items-center mb-4">
                                <div class="flex space-x-1 mr-3">
                                    <i data-lucide="star" class="w-6 h-6 text-yellow-400 fill-current"></i>
                                    <i data-lucide="star" class="w-6 h-6 text-yellow-400 fill-current"></i>
                                    <i data-lucide="star" class="w-6 h-6 text-yellow-400 fill-current"></i>
                                    <i data-lucide="star" class="w-6 h-6 text-yellow-400 fill-current"></i>
                                    <i data-lucide="star" class="w-6 h-6 text-yellow-400 fill-current"></i>
                                </div>
                                <span id="modalRating" class="text-2xl font-bold mr-2"></span>
                                <span id="modalReviews" class="text-lg text-gray-300"></span>
                            </div>
                        </div>
                        <div class="text-right">
                            <div id="modalPrice" class="text-3xl font-bold"></div>
                            <div class="text-sm text-gray-300">à partir de</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contenu principal -->
            <div class="p-8">
                <!-- Badges et statut -->
                <div class="flex flex-wrap gap-3 mb-6">
                    <div id="modalBadge"
                        class="px-4 py-2 bg-gradient-to-r from-yellow-400 to-yellow-500 text-black rounded-full text-sm font-bold">
                    </div>
                    <div id="modalCity"
                        class="px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-full text-sm font-semibold">
                    </div>
                    <div id="modalAvailability"
                        class="px-4 py-2 bg-green-500 text-white rounded-full text-sm font-semibold"></div>
                </div>

                <!-- Bio -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-3">À propos</h3>
                    <p id="modalBio" class="text-gray-600 leading-relaxed"></p>
                </div>

                <!-- Services -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Services proposés</h3>
                    <div id="modalServices" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                </div>

                <!-- Galerie -->
                <div class="mb-8" id="modalGallerySection" style="display: none;">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Galerie</h3>
                    <div id="modalGallery" class="grid grid-cols-2 md:grid-cols-3 gap-4"></div>
                </div>

                <!-- Informations de contact -->
                <div class="mb-8">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Contact</h3>
                    <div class="grid grid-cols-1 gap-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="flex items-center p-4 bg-gray-50 rounded-xl">
                                <i data-lucide="mail" class="w-5 h-5 text-pink-500 mr-3 flex-shrink-0"></i>
                                <span id="modalEmail" class="text-gray-700 text-sm break-all"></span>
                            </div>
                            <div class="flex items-center p-4 bg-gray-50 rounded-xl">
                                <i data-lucide="phone" class="w-5 h-5 text-pink-500 mr-3 flex-shrink-0"></i>
                                <span id="modalPhone" class="text-gray-700 text-sm"></span>
                            </div>
                        </div>
                        <div class="flex items-start p-4 bg-gray-50 rounded-xl">
                            <i data-lucide="map-pin" class="w-5 h-5 text-pink-500 mr-3 flex-shrink-0 mt-1"></i>
                            <span id="modalAddress" class="text-gray-700 text-sm leading-relaxed"></span>
                        </div>
                    </div>
                </div>

                <!-- Réseaux sociaux -->
                <div class="mb-8" id="modalSocialSection" style="display: none;">
                    <h3 class="text-xl font-bold text-gray-800 mb-4">Réseaux sociaux</h3>
                    <div id="modalSocial" class="grid grid-cols-1 lg:grid-cols-2 gap-6"></div>
                </div>

                <!-- Actions -->
                <div class="flex flex-col sm:flex-row gap-4">
                    <a id="modalProfileLink" href="#"
                        class="flex-1 bg-gradient-to-r from-pink-500 to-purple-500 text-white px-6 py-3 rounded-xl text-center font-semibold hover:from-pink-600 hover:to-purple-600 transition-all duration-300 transform hover:scale-105">
                        Voir le profil complet
                    </a>
                    <button id="modalBookBtn"
                        class="px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-semibold hover:bg-gray-200 transition-colors duration-300">
                        Prendre rendez-vous
                    </button>
                </div>
                {% if not user.is_authenticated %}
                <p class="mt-3 text-sm text-gray-600">
                    Pour voir le profil complet ou prendre rendez‑vous, vous devez d'abord créer un compte
                    ou vous connecter.
                </p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script id="professionalsData" type="application/json">{{ professionals_json|safe }}</script>
<script>
    // Passer les données des professionnelles au JavaScript
    window.professionalsData = (function () {
        try {
            const el = document.getElementById('professionalsData');
            return el ? JSON.parse(el.textContent) : {};
        } catch (e) { return {}; }
    })();

    // Gestion du modal
    document.addEventListener('DOMContentLoaded', function () {
        const modal = document.getElementById('professionalModal');
        const closeModal = document.getElementById('closeModal');
        const modalOverlay = document.querySelector('.modal-overlay');

        // Fonction pour ouvrir le modal
        function openModal(professionalData) {
            // Remplir les données
            document.getElementById('modalName').textContent = professionalData.full_name;
            document.getElementById('modalBusiness').textContent = professionalData.business_name;
            document.getElementById('modalRating').textContent = professionalData.rating;
            document.getElementById('modalReviews').textContent = `(${professionalData.total_reviews} avis)`;
            document.getElementById('modalPrice').textContent = `${professionalData.price}D`;
            document.getElementById('modalBadge').textContent = professionalData.badge;
            document.getElementById('modalCity').textContent = professionalData.city_only || professionalData.city || 'Non spécifié';
            document.getElementById('modalAvailability').textContent = professionalData.availability;
            document.getElementById('modalBio').textContent = professionalData.bio;
            document.getElementById('modalEmail').textContent = professionalData.email;
            document.getElementById('modalPhone').textContent = professionalData.phone_number || 'Non renseigné';
            document.getElementById('modalAddress').textContent = professionalData.address || 'Non renseigné';
            const modalProfileLink = document.getElementById('modalProfileLink');
            const profileUrl = professionalData.profile_url || '#';
            if (window.IS_AUTHENTICATED) {
                modalProfileLink.href = profileUrl;
            } else {
                modalProfileLink.href = window.redirectWithSignup(profileUrl);
            }

            // Image de profil
            const profileImg = document.getElementById('modalProfileImage');
            if (professionalData.profile_photo) {
                profileImg.src = professionalData.profile_photo;
                profileImg.alt = professionalData.full_name;
            } else {
                profileImg.style.display = 'none';
            }

            // Services
            const servicesContainer = document.getElementById('modalServices');
            servicesContainer.innerHTML = '';
            if (professionalData.services && professionalData.services.length > 0) {
                professionalData.services.forEach(service => {
                    const serviceDiv = document.createElement('div');
                    serviceDiv.className = 'p-4 bg-gradient-to-br from-pink-50 to-purple-50 rounded-xl border border-pink-200';
                    serviceDiv.innerHTML = `
                    <h4 class="font-semibold text-gray-800 mb-2">${service.name}</h4>
                    <div class="flex justify-between items-center text-sm text-gray-600">
                        <span>${service.price}D</span>
                        <span>${service.duration} min</span>
                    </div>
                `;
                    servicesContainer.appendChild(serviceDiv);
                });
            } else {
                servicesContainer.innerHTML = '<p class="text-gray-500">Aucun service renseigné</p>';
            }

            // Galerie
            const gallerySection = document.getElementById('modalGallerySection');
            const galleryContainer = document.getElementById('modalGallery');
            if (professionalData.gallery && professionalData.gallery.length > 0) {
                gallerySection.style.display = 'block';
                galleryContainer.innerHTML = '';
                professionalData.gallery.forEach(image => {
                    const imgDiv = document.createElement('div');
                    imgDiv.className = 'aspect-square overflow-hidden rounded-xl';
                    imgDiv.innerHTML = `<img src="${image}" alt="Galerie" class="w-full h-full object-cover hover:scale-110 transition-transform duration-300">`;
                    galleryContainer.appendChild(imgDiv);
                });
            } else {
                gallerySection.style.display = 'none';
            }

            // Réseaux sociaux avec embeds
            const socialSection = document.getElementById('modalSocialSection');
            const socialContainer = document.getElementById('modalSocial');

            // Fonction pour extraire le username Instagram d'une URL
            function getInstagramUsername(url) {
                if (!url) return null;
                const match = url.match(/instagram\.com\/([^\/\?]+)/);
                return match ? match[1] : null;
            }

            // Fonction pour extraire le page ID Facebook d'une URL
            function getFacebookPageId(url) {
                if (!url) return null;
                const match = url.match(/facebook\.com\/([^\/\?]+)/);
                return match ? match[1] : null;
            }

            const socialEmbeds = [];

            // Instagram Embed
            if (professionalData.social_instagram) {
                const username = getInstagramUsername(professionalData.social_instagram);
                if (username) {
                    socialEmbeds.push(`
                        <div class="social-embed-card">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-gradient-to-r from-pink-500 to-purple-500 rounded-full flex items-center justify-center mr-3">
                                        <i data-lucide="instagram" class="w-5 h-5 text-white"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-800">Instagram</h4>
                                        <a href="${professionalData.social_instagram}" target="_blank" class="text-sm text-pink-500 hover:underline">@${username}</a>
                                    </div>
                                </div>
                                <a href="${professionalData.social_instagram}" target="_blank" class="px-4 py-2 bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-lg text-sm font-semibold hover:from-pink-600 hover:to-purple-600 transition-all">
                                    Suivre
                                </a>
                            </div>
                            <div class="relative w-full overflow-hidden rounded-xl bg-gray-100" style="padding-bottom: 125%; min-height: 400px;">
                                <iframe src="https://www.instagram.com/${username}/embed" 
                                    class="absolute top-0 left-0 w-full h-full border-0" 
                                    frameborder="0" 
                                    scrolling="no" 
                                    allowtransparency="true"
                                    loading="lazy">
                                </iframe>
                            </div>
                            <p class="text-xs text-gray-500 mt-2 text-center">Contenu public Instagram de @${username}</p>
                        </div>
                    `);
                }
            }

            // Facebook Embed
            if (professionalData.social_facebook) {
                const pageId = getFacebookPageId(professionalData.social_facebook);
                if (pageId) {
                    socialEmbeds.push(`
                        <div class="social-embed-card">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center mr-3">
                                        <i data-lucide="facebook" class="w-5 h-5 text-white"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-gray-800">Facebook</h4>
                                        <a href="${professionalData.social_facebook}" target="_blank" class="text-sm text-blue-600 hover:underline">${pageId}</a>
                                    </div>
                                </div>
                                <a href="${professionalData.social_facebook}" target="_blank" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 transition-all">
                                    Suivre
                                </a>
                            </div>
                            <div class="relative w-full overflow-hidden rounded-xl bg-gray-100">
                                <div class="fb-page" 
                                    data-href="${professionalData.social_facebook}" 
                                    data-tabs="timeline" 
                                    data-width="500" 
                                    data-height="500" 
                                    data-small-header="false" 
                                    data-adapt-container-width="true" 
                                    data-hide-cover="false" 
                                    data-show-facepile="true">
                                </div>
                            </div>
                            <p class="text-xs text-gray-500 mt-2 text-center">Contenu public Facebook</p>
                        </div>
                    `);
                }
            }

            // TikTok Link (TikTok n'a pas d'embed simple sans authentification)
            if (professionalData.social_tiktok) {
                socialEmbeds.push(`
                    <div class="social-embed-card">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <div class="w-10 h-10 bg-black rounded-full flex items-center justify-center mr-3">
                                    <i data-lucide="music" class="w-5 h-5 text-white"></i>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-gray-800">TikTok</h4>
                                    <a href="${professionalData.social_tiktok}" target="_blank" class="text-sm text-gray-700 hover:underline">Voir le profil</a>
                                </div>
                            </div>
                            <a href="${professionalData.social_tiktok}" target="_blank" class="px-4 py-2 bg-black text-white rounded-lg text-sm font-semibold hover:bg-gray-800 transition-all">
                                Suivre
                            </a>
                        </div>
                        <a href="${professionalData.social_tiktok}" target="_blank" class="block">
                            <div class="relative w-full h-64 overflow-hidden rounded-xl bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100 flex items-center justify-center hover:scale-105 transition-transform duration-300">
                                <div class="text-center">
                                    <i data-lucide="music" class="w-16 h-16 text-gray-600 mx-auto mb-4"></i>
                                    <p class="text-lg font-semibold text-gray-700">Voir le profil TikTok</p>
                                    <p class="text-sm text-gray-500 mt-2">Cliquez pour découvrir les vidéos</p>
                                </div>
                            </div>
                        </a>
                    </div>
                `);
            }

            if (socialEmbeds.length > 0) {
                socialSection.style.display = 'block';
                socialContainer.innerHTML = socialEmbeds.join('');

                // Charger le SDK Facebook si nécessaire
                if (professionalData.social_facebook && !window.FB) {
                    const script = document.createElement('script');
                    script.async = true;
                    script.defer = true;
                    script.crossOrigin = 'anonymous';
                    script.src = 'https://connect.facebook.net/fr_FR/sdk.js#xfbml=1&version=v18.0';
                    document.body.appendChild(script);

                    script.onload = () => {
                        if (window.FB) {
                            window.FB.XFBML.parse();
                        }
                    };
                }
            } else {
                socialSection.style.display = 'none';
            }

            // Configurer le bouton de réservation (redirige selon auth)
            const bookBtn = document.getElementById('modalBookBtn');
            if (bookBtn) {
                const bookingUrl = professionalData.booking_url || ('/booking/' + (professionalData.id ? ('?pro_id=' + professionalData.id) : ''));
                bookBtn.onclick = function () {
                    const target = window.IS_AUTHENTICATED ? bookingUrl : window.redirectWithSignup(bookingUrl);
                    window.location.href = target;
                };
            }

            // Afficher le modal
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';

            // Réinitialiser les icônes Lucide
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Fonction pour fermer le modal
        function closeModalFunc() {
            modal.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // Event listeners
        closeModal.addEventListener('click', closeModalFunc);
        modalOverlay.addEventListener('click', closeModalFunc);

        // Fermer avec Escape
        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                closeModalFunc();
            }
        });

        // Ajouter les event listeners aux cartes
        function attachCardListeners() {
            document.querySelectorAll('.expert-card').forEach(card => {
                card.addEventListener('click', function () {
                    const expertId = this.getAttribute('data-expert-id');
                    const professionalData = window.professionalsData ? window.professionalsData[expertId] : null;
                    if (professionalData) {
                        openModal(professionalData);
                    }
                });
            });
        }

        attachCardListeners();
    });

    // Gestion du filtre de gouvernorat et du carousel
    document.addEventListener('DOMContentLoaded', function () {
        const governorateFilter = document.getElementById('governorateFilter');
        const carousel = document.getElementById('professionalsCarousel');
        const prevBtn = document.getElementById('proPrevBtn');
        const nextBtn = document.getElementById('proNextBtn');
        const currentPageSpan = document.getElementById('currentPage');
        const totalPagesSpan = document.getElementById('totalPages');
        const resultCount = document.getElementById('resultCount');

        let currentPage = 1;
        let itemsPerPage = 8; // 2 lignes de 4 cartes
        let filteredCards = [];

        // Ajuster items per page selon la taille de l'écran
        function updateItemsPerPage() {
            const width = window.innerWidth;
            if (width < 768) {
                itemsPerPage = 2; // Mobile: 2 cartes
            } else if (width < 1024) {
                itemsPerPage = 4; // Tablet: 4 cartes (2x2)
            } else if (width < 1280) {
                itemsPerPage = 6; // Desktop small: 6 cartes (2x3)
            } else {
                itemsPerPage = 8; // Desktop large: 8 cartes (2x4)
            }
            updateDisplay();
        }

        // Filtrer les cartes par ville/gouvernorat
        function filterCards() {
            const selectedGov = governorateFilter ? governorateFilter.value : '';
            const allCards = Array.from(carousel.querySelectorAll('.expert-card'));

            filteredCards = allCards.filter(card => {
                const byGov = !selectedGov || card.getAttribute('data-governorate') === selectedGov;
                return byGov;
            });

            currentPage = 1;
            updateDisplay();
        }

        // Mettre à jour l'affichage du carousel
        function updateDisplay() {
            const allCards = Array.from(carousel.querySelectorAll('.expert-card'));
            const totalPages = Math.ceil(filteredCards.length / itemsPerPage);

            // Masquer toutes les cartes
            allCards.forEach(card => {
                card.classList.add('hidden-card');
                card.classList.remove('show');
            });

            // Afficher les cartes de la page courante
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const cardsToShow = filteredCards.slice(start, end);

            cardsToShow.forEach((card, index) => {
                card.classList.remove('hidden-card');
                card.classList.add('show');
            });

            // Mettre à jour les contrôles
            currentPageSpan.textContent = totalPages > 0 ? currentPage : 0;
            totalPagesSpan.textContent = totalPages;
            resultCount.textContent = `(${filteredCards.length} résultat${filteredCards.length > 1 ? 's' : ''})`;

            // Activer/désactiver les boutons
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage >= totalPages;

            // Réinitialiser les icônes Lucide
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Event listeners
        if (governorateFilter) governorateFilter.addEventListener('change', filterCards);

        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                updateDisplay();
                carousel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });

        nextBtn.addEventListener('click', () => {
            const totalPages = Math.ceil(filteredCards.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                updateDisplay();
                carousel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        });

        // Support du swipe sur mobile
        let touchStartX = 0;
        let touchEndX = 0;

        carousel.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });

        carousel.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;

            if (Math.abs(diff) > swipeThreshold) {
                if (diff > 0) {
                    // Swipe left - next page
                    nextBtn.click();
                } else {
                    // Swipe right - previous page
                    prevBtn.click();
                }
            }
        }

        // Navigation au clavier
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                prevBtn.click();
            } else if (e.key === 'ArrowRight') {
                nextBtn.click();
            }
        });

        // Initialiser et gérer le redimensionnement
        window.addEventListener('resize', updateItemsPerPage);

        // Initialisation
        filteredCards = Array.from(carousel.querySelectorAll('.expert-card'));
        updateItemsPerPage();
    });
</script>
{% endblock %}